<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>This file is used to keep the project organized. It is based on the</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-01-04 22:49:21 CET"/>
<meta name="author" content="Dashamir Hoxha"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">

<h1 class="title">This file is used to keep the project organized. It is based on the</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Functional requirements </a>
<ul>
<li><a href="#sec-1.1">1.1 Desired Functionality </a>
<ul>
<li><a href="#sec-1.1.1">1.1.1 Open access </a></li>
<li><a href="#sec-1.1.2">1.1.2 Authenticated voting </a></li>
<li><a href="#sec-1.1.3">1.1.3 Tracking votes </a></li>
<li><a href="#sec-1.1.4">1.1.4 Highly customizable </a></li>
<li><a href="#sec-1.1.5">1.1.5 Evaluation Algorithms </a></li>
<li><a href="#sec-1.1.6">1.1.6 Detailed and comprehensive reporting and statistics </a></li>
<li><a href="#sec-1.1.7">1.1.7 Integration with other modules </a></li>
</ul>
</li>
<li><a href="#sec-1.2">1.2 Required forms </a>
<ul>
<li><a href="#sec-1.2.1">1.2.1 Query interface </a></li>
<li><a href="#sec-1.2.2">1.2.2 Suggestion interface </a></li>
<li><a href="#sec-1.2.3">1.2.3 User configuration interface </a></li>
<li><a href="#sec-1.2.4">1.2.4 Admin interfaces </a></li>
<li><a href="#sec-1.2.5">1.2.5 Other modules interfaces </a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-2">2 Design </a>
<ul>
<li><a href="#sec-2.1">2.1 DB Schema </a></li>
<li><a href="#sec-2.2">2.2 UI </a>
<ul>
<li><a href="#sec-2.2.1">2.2.1 translations/get/&lt;lng&gt;/&lt;sguid&gt; </a></li>
<li><a href="#sec-2.2.2">2.2.2 translations/search?lng=..&amp;limit=..&amp;mode=..&amp;words=.. </a></li>
<li><a href="#sec-2.2.3">2.2.3 translations/vote </a></li>
<li><a href="#sec-2.2.4">2.2.4 translations/user<sub>settings</sub> </a></li>
<li><a href="#sec-2.2.5">2.2.5 translations/admin </a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-3">3 Implementation Plan </a></li>
<li><a href="#sec-4">4 Tasks </a>
<ul>
<li><a href="#sec-4.1">4.1 DB </a>
<ul>
<li><a href="#sec-4.1.1">4.1.1 Write scripts for importing and updating data from *.po files </a></li>
<li><a href="#sec-4.1.2">4.1.2 Improve hash functions for strings and translations </a></li>
<li><a href="#sec-4.1.3">4.1.3 Replace id-s by uid-s (universal id-s) based on hashes </a></li>
<li><a href="#sec-4.1.4">4.1.4 Write scripts for exporting PO files from the DB. </a></li>
</ul>
</li>
<li><a href="#sec-4.2">4.2 UI </a>
<ul>
<li><a href="#sec-4.2.1">4.2.1 List of <b>string&ndash;&gt;translations</b> </a></li>
<li><a href="#sec-4.2.2">4.2.2 XML-RPC interface </a></li>
<li><a href="#sec-4.2.3">4.2.3 Interface <b>translations/vote</b> </a></li>
</ul>
</li>
<li><a href="#sec-4.3">4.3 Misc </a></li>
</ul>
</li>
<li><a href="#sec-5">5 Notes </a>
<ul>
<li><a href="#sec-5.1">5.1 How to create TAGS for Emacs </a></li>
<li><a href="#sec-5.2">5.2 Fine-Tuning MySQL Full-Text Search </a></li>
<li><a href="#sec-5.3">5.3 Misc </a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Functional requirements </h2>
<div class="outline-text-2" id="text-1">

<p>Describe the desired functionality of the module. Then define the
requirements in terms of forms and other UI elements, permissions,
etc.
</p>

</div>

<div id="outline-container-1.1" class="outline-3">
<h3 id="sec-1.1"><span class="section-number-3">1.1</span> Desired Functionality </h3>
<div class="outline-text-3" id="text-1.1">



</div>

<div id="outline-container-1.1.1" class="outline-4">
<h4 id="sec-1.1.1"><span class="section-number-4">1.1.1</span> Open access </h4>
<div class="outline-text-4" id="text-1.1.1">

<p>Everybody will be able to use the system for the purpose of getting
translation suggestions for a certain string, even unauthenticated
(anonymous/guest) users (just like open-tran.eu).
Furthermore, it should be possible to use an API (web services), so
that these suggestions can be retrieved and used even by external
applications.
</p>
</div>

</div>

<div id="outline-container-1.1.2" class="outline-4">
<h4 id="sec-1.1.2"><span class="section-number-4">1.1.2</span> Authenticated voting </h4>
<div class="outline-text-4" id="text-1.1.2">

<p>Submitting votes or new suggestions will be allowed only for the
subscribed users (which have agreed to help and contribute). No
contributions from anonymous/guests will be accepted.
</p>
</div>

</div>

<div id="outline-container-1.1.3" class="outline-4">
<h4 id="sec-1.1.3"><span class="section-number-4">1.1.3</span> Tracking votes </h4>
<div class="outline-text-4" id="text-1.1.3">

<p>Votes and suggestions will not be anonymous. For each vote or
suggestion, the user who submitted it will be recorded and
saved. This will allow the user to see all the strings that he has
already voted for, and also to change any of the votes, if he later
changed his mind. At the same time it will prevent multiple votes
by the same user for the same translation.
</p>
</div>

</div>

<div id="outline-container-1.1.4" class="outline-4">
<h4 id="sec-1.1.4"><span class="section-number-4">1.1.4</span> Highly customizable </h4>
<div class="outline-text-4" id="text-1.1.4">

<p>The system will have a flexible configuration and customization
page. This means that the user should be able to customize how much
he would like to help and contribute. For example:
</p><ul>
<li>
how many translation votes per day (an upper limit)
</li>
<li>
which communication means he preferes (email, facebook, google+,
twitter, website, android app, iPhone app, etc.)
</li>
<li>
which projects or packages he would like to focus on (for
example, if the user selects the package KDE, only strings that
belong to a project on this package will be sent to him for
review and feedback)
</li>
<li>
which languages he would like to use as primary and secondary
source languages (for example a user that is not confident in
English, may choose to use French as a primary language and
Italian+Spanish as secondary/helper languages)
</li>
<li>
sequential or random selection of strings (random is the
default, but if the user is interested in just one or a few
projects, he may prefer to review the strings sequentially)

</li>
</ul>
</div>

</div>

<div id="outline-container-1.1.5" class="outline-4">
<h4 id="sec-1.1.5"><span class="section-number-4">1.1.5</span> Evaluation Algorithms </h4>
<div class="outline-text-4" id="text-1.1.5">

<p>The contribution and performance of the users should be measured
and evaluated using certain algorithms and/or heuristics. The users
will be awarded points based on their performance. Probably some
rewarding mechanizms can be integrated later for the top
contributers.
</p>
</div>

</div>

<div id="outline-container-1.1.6" class="outline-4">
<h4 id="sec-1.1.6"><span class="section-number-4">1.1.6</span> Detailed and comprehensive reporting and statistics </h4>
<div class="outline-text-4" id="text-1.1.6">

<p>Different kinds of reports and statistics related to users,
projects, activity etc. should be supported and provided.
(What are exactly these reports? To be elaborated.)
</p>
</div>

</div>

<div id="outline-container-1.1.7" class="outline-4">
<h4 id="sec-1.1.7"><span class="section-number-4">1.1.7</span> Integration with other modules </h4>
<div class="outline-text-4" id="text-1.1.7">

<p>It should be possible to integrate with other l10n modules, like
l10n<sub>server</sub>, etc. When a new project is added on l10n<sub>server</sub>, the
strings that need to be translated can get some suggestions
automatically from l10n<sub>suggestions</sub>. Or they can be submitted to
l10n<sub>suggestions</sub> so that people can supply translation and
suggestions for them, to vote on these suggestions, etc.
</p>
<p>
The manager of the project on l10n<sub>server</sub> may also adjust some
configuration parameters related to the suggestions. For example a
suggestion can be accepted as a correct translation only if it got
75% of all the votes about all the suggestions, otherwise it
should be considered as fuzzy translation and needs to be reviewed
by the package manager.
</p>

</div>
</div>

</div>

<div id="outline-container-1.2" class="outline-3">
<h3 id="sec-1.2"><span class="section-number-3">1.2</span> Required forms </h3>
<div class="outline-text-3" id="text-1.2">



</div>

<div id="outline-container-1.2.1" class="outline-4">
<h4 id="sec-1.2.1"><span class="section-number-4">1.2.1</span> Query interface </h4>
<div class="outline-text-4" id="text-1.2.1">

<p>On this form anybody (registered user or anonymous) can
supply a string in English, and the system will return the
translation suggestions related to it and the corresponding votes
that each suggestion has.
</p>
<p>
If the English string does not have an exact match on the DB, a
list of similar strings will be returned and the user will choose
toc check one of them.
</p>
<p>
This functionality of querying suggestions will be offered also by
a web service (XMLRPC) so that it can be used by any external
programs.
</p>
</div>

</div>

<div id="outline-container-1.2.2" class="outline-4">
<h4 id="sec-1.2.2"><span class="section-number-4">1.2.2</span> Suggestion interface </h4>
<div class="outline-text-4" id="text-1.2.2">

<p>This is the form where the (authenticated) user is presented with
an English string and several translation suggestions for it, and
he votes on one of them as the best, or provides another
suggestion which he thinks is better.
</p>
<p>
The string to be translated is selected randomly, unless the user
has selected 'sequential' on his settings. The selection of the
string is also done so that it complies with the restrictions
imposed by the user on his settings (for example only from a
certain package).
</p>
<p>
The selection of the string should be also influenced by certain
algoriths and heuristics, which should try to give more exposure
to the strings that need more votes. For example if a string
already got 10 votes and another one got just 2 votes, the second
one should be more likely to be selected.
</p>
<p>
This interface should be able to integrate somehow with facebook,
email, google+, etc.
</p>
</div>

</div>

<div id="outline-container-1.2.3" class="outline-4">
<h4 id="sec-1.2.3"><span class="section-number-4">1.2.3</span> User configuration interface </h4>
<div class="outline-text-4" id="text-1.2.3">

<p>Here the user customizes his setings, as described in the section
'Desired Functionality' above.
</p>
</div>

</div>

<div id="outline-container-1.2.4" class="outline-4">
<h4 id="sec-1.2.4"><span class="section-number-4">1.2.4</span> Admin interfaces </h4>
<div class="outline-text-4" id="text-1.2.4">

<p>The admin should be able to customize the overall behaviour of the
module, to check activity, to get reports and statistics, to
maintain the data (backup, restore, update) etc.
</p>
</div>

</div>

<div id="outline-container-1.2.5" class="outline-4">
<h4 id="sec-1.2.5"><span class="section-number-4">1.2.5</span> Other modules interfaces </h4>
<div class="outline-text-4" id="text-1.2.5">

<p>In case of integration with other modules (for example with
l10n<sub>server</sub>), l10n<sub>suggestions</sub> should alter their forms and
interfaces to add the neccessary options and settings.
</p>

</div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Design </h2>
<div class="outline-text-2" id="text-2">



</div>

<div id="outline-container-2.1" class="outline-3">
<h3 id="sec-2.1"><span class="section-number-3">2.1</span> DB Schema </h3>
<div class="outline-text-3" id="text-2.1">


<p>
Files, Projects and Locations are related to the import/export of
the PO files.
</p>
<p>
Projects and Categories can be used to limit the scope of the
search (and other operations).
</p>
<p>
A project contains the translations of a certain application
(software).
</p>
<p>
A project can have several PO files (one for each different
language).  Each of these PO files has many PO entries, which are
stored in the table Locations.
</p>
<p>
The table Locations stores only the comments, line references,
flags, previous strings, etc. of each PO entry.
</p>
<p>
The msgid (and msgctxt) of the entry is stored on the table
Strings. A string can be connected to several locations, since the
same string can be used on different projects.
</p>
<p>
Each string can have several translations (or suggestions) in each
language. Each translation can have many votes. Each vote is given
by a certain user.
</p>
<p>
A release can be appended to the name of the project as well. So,
two different releases of the same software project are considered
as two different projects. Each of them has its on list of
locations, however they share most of the strings and
translations. Actually, for the purposes of l10n<sub>suggestions</sub> only
the latest release is what matters, so any earlier releases will
eventually be removed (or archived).
</p>
<p>
The DB tables and their fields:
</p>
<dl>
<dt>Files</dt><dd>
A PO file that is imported and can be exported from the
DB.
<dl>
<dt>fid : serial</dt><dd>
Auto-increment internal identifier.
</dd>
<dt>hash : char(40)</dt><dd>
The SHA1() hash of the whole file content.
</dd>
<dt>pid : int</dt><dd>
Reference to the project for which this PO file is
a translation.
</dd>
<dt>lng : varchar(10)</dt><dd>
The code of the translation language.
</dd>
<dt>headers : text</dt><dd>
Headers of the imported PO file, as a long
line. Needed mainly for exporting.
</dd>
<dt>comments : text</dt><dd>
Translator comments of the file (above the
header entry). Needed mainly for exporting.
</dd>
<dt>uid : int</dt><dd>
Id of the user that imported the file.
</dd>
<dt>time : datetime</dt><dd>
The date and time that the record was
registered.

</dd>
</dl>
</dd>
<dt>Projects</dt><dd>
A project is the software/application which is
translated by the PO files.
<dl>
<dt>pid : serial</dt><dd>
Auto-increment internal identifier.
</dd>
<dt>project : varchar(100)</dt><dd>
Project name (with the release
appended if needed).
</dd>
<dt>origin : varchar(100)</dt><dd>
The origin of the project (where does
it come from).
</dd>
<dt>uid : int(11)</dt><dd>
Id of the user that registered the project.
</dd>
<dt>time : datetime</dt><dd>
The date and time that the project was
registered.

</dd>
</dl>
</dd>
<dt>Locations</dt><dd>
Locations (lines) where a l10n string is found.
<dl>
<dt>lid : serial</dt><dd>
Internal numeric identifier of a line.
</dd>
<dt>sguid : char(40)</dt><dd>
Reference to the id of the l10n string
contained in this line.
</dd>
<dt>pid : int</dt><dd>
Reference to the id of the project that
contains this line.
</dd>
<dt>translator<sub>comments</sub> : varchar(500)</dt><dd>
Translator comments in
the PO entry (starting with "# ").
</dd>
<dt>extracted<sub>comments</sub> : varchar(500)</dt><dd>
Extracted comments in the
PO entry (starting with "#. ").
</dd>
<dt>line<sub>references</sub> : varchar(500)</dt><dd>
Line numbers where the sting
occurs (starting with "#: ").
</dd>
<dt>flags : varchar(100)</dt><dd>
Flags of the PO entry (starting with
"#, ").
</dd>
<dt>previous<sub>msgctxt</sub> : varchar(500)</dt><dd>
Previous msgctxt in the PO
entry (starting with "#| msgctxt ").
</dd>
<dt>previous<sub>msgid</sub> : varchar(500)</dt><dd>
Previous msgid in the PO entry
(starting with "#| msgid ").
</dd>
<dt>previous<sub>msgid</sub><sub>plural</sub> : varchar(500)</dt><dd>
Previous msgid<sub>plural</sub>
in the PO entry (starting with "#| msgid<sub>plural</sub> ").

</dd>
</dl>
</dd>
<dt>Strings</dt><dd>
Translatable strings that are extracted from projects.
<dl>
<dt>string : text</dt><dd>
The string to be translated:
CONCAT(msgid,CHAR(0),msgid<sub>plural</sub>)
</dd>
<dt>context : varchar(500)</dt><dd>
The string context (msgctxt of the PO
entry).
</dd>
<dt>sguid : char(40)</dt><dd>
Globally Unique ID of the string, as hash
of the string and context: SHA1(CONCAT(string,context))
</dd>
<dt>uid : int</dt><dd>
ID of the user that inserted this string
on the DB.
</dd>
<dt>time : datetime</dt><dd>
The time that this string was
entered on the DB.
</dd>
<dt>count : int/tiny</dt><dd>
How often this string is encountered in
all the projects. Can be useful for any heuristics that try
to find out which strings should be translated first.
</dd>
<dt>active : boolean</dt><dd>
The active/deleted status of the record.

</dd>
</dl>
</dd>
<dt>Translations</dt><dd>
Translations/suggestions of the l10n strings.
For each string there can be translations for different
languages, and more than one translation for each language.
<dl>
<dt>sguid : int</dt><dd>
Reference to the id of the l10n string that is
translated.
</dd>
<dt>lng : varchar(5)</dt><dd>
Language code (en, fr, sq<sub>AL</sub>, etc.)
</dd>
<dt>translation : varchar(1000)</dt><dd>
The (suggested) translation of
the string.
</dd>
<dt>tguid : char(40)</dt><dd>
Globally Unique ID of the translation,
defined as the hash: SHA1(CONCAT(translation,lng,sguid))
</dd>
<dt>count : int/tiny</dt><dd>
Count of votes received so far. This can be
counted on the table Votes, but for convenience is stored
here as well.
</dd>
<dt>uid : int</dt><dd>
id of the user that initially suggested/submitted
this translation
</dd>
<dt>time : datetime</dt><dd>
Time that the translation was
entered into the database.
</dd>
<dt>active : boolean</dt><dd>
The active or deleted status of the record.

</dd>
</dl>
</dd>
<dt>Votes</dt><dd>
Votes for each translation/suggestion.
<dl>
<dt>vid : serial</dt><dd>
Internal numeric identifier for a vote.
</dd>
<dt>tguid : char(40)</dt><dd>
Reference to the id of the translation
which is voted.
</dd>
<dt>uid : int</dt><dd>
Reference to the id of the user that submitted the
vote.
</dd>
<dt>time : datetime</dt><dd>
Timestamp of the voting time.
</dd>
<dt>active : boolean</dt><dd>
The active or deleted status of the record.

</dd>
</dl>
</dd>
<dt>Users</dt><dd>
Users that contribute translations/suggestions/votes.
<dl>
<dt>uid : int</dt><dd>
The numeric identifier of the user.
</dd>
<dt>points : int</dt><dd>
Number of points rewarded for his activity.
</dd>
<dt>config : varchar(250)</dt><dd>
Serialized configuration variables.

</dd>
</dl>
</dd>
</dl>
</div>

</div>

<div id="outline-container-2.2" class="outline-3">
<h3 id="sec-2.2"><span class="section-number-3">2.2</span> UI </h3>
<div class="outline-text-3" id="text-2.2">



</div>

<div id="outline-container-2.2.1" class="outline-4">
<h4 id="sec-2.2.1"><span class="section-number-4">2.2.1</span> translations/get/&lt;lng&gt;/&lt;sguid&gt; </h4>
<div class="outline-text-4" id="text-2.2.1">


<p>
An interface for suggesting translations to a string.  Gets as
input
</p><ul>
<li>
the language code to which will be translated
</li>
<li>
the hash of the string to be translated

</li>
</ul>

<p>Returns a list of translation suggestions of the given string.
This interface should be accessible by anybody.
There should be also a corresponding XML-RPC interface, so that it
can be accessed from external programs.
</p>
</div>

</div>

<div id="outline-container-2.2.2" class="outline-4">
<h4 id="sec-2.2.2"><span class="section-number-4">2.2.2</span> translations/search?lng=..&amp;limit=..&amp;mode=..&amp;words=.. </h4>
<div class="outline-text-4" id="text-2.2.2">


<p>
Displays a list of strings and the corresponding suggestions, which
match some filter conditions. Filter conditions can be modified on
the interface. Search can be done by the content of the strings and
suggestions, and can be limited in scope by the project, by the author
of suggestions, by the submition date, etc.
</p>
<p>
From the displayed list, it is also possible to view details (for
string or suggestion), to submit votes, etc.
</p>
</div>

</div>

<div id="outline-container-2.2.3" class="outline-4">
<h4 id="sec-2.2.3"><span class="section-number-4">2.2.3</span> translations/vote </h4>
<div class="outline-text-4" id="text-2.2.3">


<p>
This interface will select a random string and will present it and
its available translations to the user. The user will vote one of
them as the best translation, or will provide a new translation
that he thinks is better.
</p>
<p>
The original string is usually presented in English, but
additional languages can be presented as well, if the user is not
confident with English. (He can select these options on the user
settings page as well.)
</p>
</div>

</div>

<div id="outline-container-2.2.4" class="outline-4">
<h4 id="sec-2.2.4"><span class="section-number-4">2.2.4</span> translations/user<sub>settings</sub> </h4>
<div class="outline-text-4" id="text-2.2.4">

<p>The user can set:
</p><ul>
<li>
the prefered source language(s)
</li>
<li>
how many votes a day is willing to give
</li>
<li>
etc.

</li>
</ul>
</div>

</div>

<div id="outline-container-2.2.5" class="outline-4">
<h4 id="sec-2.2.5"><span class="section-number-4">2.2.5</span> translations/admin </h4>
<div class="outline-text-4" id="text-2.2.5">

<ul>
<li>
translations/admin/config
</li>
<li>
translations/admin/dashboard
</li>
<li>
translations/admin/reports
</li>
<li>
translations/admin/stats

</li>
</ul>
</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Implementation Plan </h2>
<div class="outline-text-2" id="text-3">

<ol>
<li>
<b>[X]</b> Make <b>voting</b> work (without permissions, user setting, admin
config, etc.)
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Release an initial drupal package and prepare a test/demo
site.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Add <b>admin config</b>, <b>user settings</b>, <b>permissions</b>,
permission checking, etc.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Make a basic <b>integration with facebook</b> (for voting).
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Put it online.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Add a basic <b>email interface</b> (for voting).
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Add a <b>mobile interface</b> (or theme).
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Build the pages for admin dashboard, reports and stats.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Integrate with projects and packages from l10n<sub>server</sub>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Add an API for external applications.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Integration with google+, twitter, diaspora, etc.
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> Android app that can be used for voting.

</li>
</ol>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Tasks </h2>
<div class="outline-text-2" id="text-4">



</div>

<div id="outline-container-4.1" class="outline-3">
<h3 id="sec-4.1"><span class="section-number-3">4.1</span> DB </h3>
<div class="outline-text-3" id="text-4.1">



</div>

<div id="outline-container-4.1.1" class="outline-4">
<h4 id="sec-4.1.1"><span class="section-number-4">4.1.1</span> <span class="done DONE"> DONE</span> Write scripts for importing and updating data from *.po files </h4>
<div class="outline-text-4" id="text-4.1.1">

<ul>
<li>
Take care to preserve the data that already exist in the DB.
</li>
</ul>
</div>

</div>

<div id="outline-container-4.1.2" class="outline-4">
<h4 id="sec-4.1.2"><span class="section-number-4">4.1.2</span> <span class="done DONE"> DONE</span> Improve hash functions for strings and translations </h4>
<div class="outline-text-4" id="text-4.1.2">

</div>

</div>

<div id="outline-container-4.1.3" class="outline-4">
<h4 id="sec-4.1.3"><span class="section-number-4">4.1.3</span> <span class="done DONE"> DONE</span> Replace id-s by uid-s (universal id-s) based on hashes </h4>
<div class="outline-text-4" id="text-4.1.3">

</div>

</div>

<div id="outline-container-4.1.4" class="outline-4">
<h4 id="sec-4.1.4"><span class="section-number-4">4.1.4</span> <span class="done DONE"> DONE</span> Write scripts for exporting PO files from the DB. </h4>
<div class="outline-text-4" id="text-4.1.4">


</div>
</div>

</div>

<div id="outline-container-4.2" class="outline-3">
<h3 id="sec-4.2"><span class="section-number-3">4.2</span> UI </h3>
<div class="outline-text-3" id="text-4.2">



</div>

<div id="outline-container-4.2.1" class="outline-4">
<h4 id="sec-4.2.1"><span class="section-number-4">4.2.1</span> List of <b>string&ndash;&gt;translations</b> </h4>
<div class="outline-text-4" id="text-4.2.1">

<ul>
<li>
Define and implement suitable access rights.
</li>
<li>
Some of the advanced filtering options should be available
only if the user has propper access rights.
</li>
<li>
Some editing options should be available only if the user has
propper access rights.
</li>
<li>
For each suggestion, the admin (or moderators) should be able to apply
additional actions (for example remove the suggestion).

</li>
<li>
For each l10n string, display details like: submitted by, submitted when,
in which projects it occurs (related locations), etc.
</li>
<li>
For each l10n string, display also the corresponding translations
(best suggestions) in auxiliary (helper) languages. For example,
besides the original l10n string (in English), the French and German
translations may be displayed as well, if these are selected on
the display options of the filter.

</li>
<li>
For each suggestion, add a Like (or +1) button. When it is clicked,
the vote is submitted through an AJAX call. The voted (or liked,
or +1'd) suggestion should be visibly distinguished from the rest.
</li>
<li>
For each suggestion, display details like: suggested by, suggested
when, number of votes, some of the latest voters (and all the voters
when clicked).
</li>
<li>
For each suggestion add a Flag (or -1) button. A suggestion is flagged
when it is totally irrelevant to the string, or is spam, or is abusive, etc.
In general, when a suggestion is flagged, it is something that should be
removed. When flagging a suggestion, a reason/explanation may be given as
well. When a suggestion is flagged, it has to be reviwed and removed
by an admin/moderator. The admin may also take some action on the user that
submitted the offending suggestion (or on the user that submitted the flag,
if the suggestion is ok).

</li>
<li>
Voting mode can be 'single' or 'multiple', and it can be selected by admin
(during installation). On mode 'single' at most one vote per string is allowed.
On mode 'multiple' at most one vote for translation is allowed (user can
approve more than one translation for the same string).
</li>
<li>
For the 'multiple' mode, an Unlike button should be available as well (in order
to change the voting at any time).
</li>
<li>
When the votes are changed, the old (removed) votes should be stored on
an archive table, in order to keep the history of changing votes as well.


</li>
</ul>
</div>

</div>

<div id="outline-container-4.2.2" class="outline-4">
<h4 id="sec-4.2.2"><span class="section-number-4">4.2.2</span> <span class="todo TODO"> TODO</span> XML-RPC interface </h4>
<div class="outline-text-4" id="text-4.2.2">

<p>Or some other web-service (API) interface.
</p>
</div>

</div>

<div id="outline-container-4.2.3" class="outline-4">
<h4 id="sec-4.2.3"><span class="section-number-4">4.2.3</span> <span class="done DONE"> DONE</span> Interface <b>translations/vote</b> </h4>
<div class="outline-text-4" id="text-4.2.3">

<p>This is almost the same as the search interface. However, instead of
using a filter to select strings, they are selected randomly, based
on user preferencies, and also on the priorities of translation.
</p>
</div>
</div>

</div>

<div id="outline-container-4.3" class="outline-3">
<h3 id="sec-4.3"><span class="section-number-3">4.3</span> Misc </h3>
<div class="outline-text-3" id="text-4.3">

<ul>
<li>
Start with simple tests (l10n<sub>suggestions</sub>.test)
</li>
<li>
Improve instalation.
</li>
<li>
Make an initial package.

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Notes </h2>
<div class="outline-text-2" id="text-5">



</div>

<div id="outline-container-5.1" class="outline-3">
<h3 id="sec-5.1"><span class="section-number-3">5.1</span> How to create TAGS for Emacs </h3>
<div class="outline-text-3" id="text-5.1">


<p>
find . -type f | etags -
find . -type f \( -name "*.module" -o -name "*.install" -o -name "*.inc" \) | etags -a &ndash;language=php -
</p>
<p>
See: <a href="http://drupal.org/node/59868">http://drupal.org/node/59868</a>
</p>
</div>

</div>

<div id="outline-container-5.2" class="outline-3">
<h3 id="sec-5.2"><span class="section-number-3">5.2</span> Fine-Tuning MySQL Full-Text Search </h3>
<div class="outline-text-3" id="text-5.2">


<p>
<a href="http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html">http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html</a>
<a href="http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html">http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html</a>
</p>
<p>
We want to index even short words and to disable stopword filtering.
</p>
<ol>
<li>
Edit /etc/mysql/my.cnf and set:

<p>
[mysqld]
ft<sub>min</sub><sub>word</sub><sub>len</sub> = 1
ft<sub>stopword</sub><sub>file</sub> = ''
</p>
<p>
[isamchk]
ft<sub>min</sub><sub>word</sub><sub>len</sub> = 1
ft<sub>stopword</sub><sub>file</sub> = ''
</p>
</li>
<li>
Restart the server: service mysql restart
</li>
<li>
Drop and recreate fulltext indexes.

</li>
</ol>
</div>

</div>

<div id="outline-container-5.3" class="outline-3">
<h3 id="sec-5.3"><span class="section-number-3">5.3</span> Misc </h3>
<div class="outline-text-3" id="text-5.3">

<ul>
<li>
Field sguid:char(40) on strings, locations and translations must
be of the same character set, otherwise mysql will not use the
index (primary key) on queries. The same for the field tguid.
</li>
</ul>
</div>
</div>
</div>
<div id="postamble">
<p class="author"> Author: Dashamir Hoxha
<a href="mailto:dasho@dasho.al">&lt;dasho@dasho.al&gt;</a>
</p>
<p class="date"> Date: 2012-01-04 22:49:21 CET</p>
<p class="creator">HTML generated by org-mode 6.33x in emacs 23</p>
</div>
</div>
</body>
</html>
