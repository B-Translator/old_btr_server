<p><iframe class="youtube-player" frameborder="0" height="385" src="http://www.youtube.com/embed/ThZoTGBB-m8" type="text/html" width="640"></iframe></p><p>Recently I generated this video that shows the activity of translating GNOME projects into Albanian during the last years. This visualization was generated by Gource <a href="http://code.google.com/p/gource/">http://code.google.com/p/gource/</a> .</p>

<p>Gource is very easy to use, just install it: <b>apt-get install gource</b>, go to the project directory, and type: <b>gource</b>. However, in the case of GNOME translations this does not generate something useful. The problem is not with gource but rather with the structure of the projects. Each translation project has its own repository, so it is not easy to generate a general view for all the projects. Besides this, each translation project has data for all the languages, and I would like to visualize only the data about the Albanian translations.</p>

<p>Here I describe the steps and data processing that I did to generate this visualization.</p>

<ol><li>Checkout all the GNOME projects (translation files):
    <pre language="bash">
      mkdir GNOME/
      cd GNOME/
      svn_gnome=http://svn.gnome.org
      gnome_modules=$(wget -o /dev/null -O- $svn_gnome/viewvc/ | grep 'a href="/viewvc/[^"]' | sed 's#.*/viewvc/\([^/]*\)/.*#\1#')
      for module in $gnome_modules; do svn checkout $svn_gnome/svn/$module/trunk/po $module; done
      cd .. </pre>
  </li><li>Generate gource log files for each of the projects:
    <pre language="bash">
      for dir in $(ls GNOME/); do echo $dir; cd GNOME/$dir/; gource --output-custom-log $dir.log; done
    </pre>
  </li><li>For each log file replace the word <i>trunk</i> with the name of the project (name of the directory), and concatenate all of them in a single big file:
    <pre language="bash">
      find GNOME -name '*.log' > gnome_log.txt
      for file in $(find GNOME/ -name '*.log'); do echo $file; dir=$(dirname $file); cat $file | sed -e "s,/trunk/,/$dir/," >> GNOME.log; done
    </pre>
  </li><li>Now extract all the log lines related to Albanian translations:
    <pre language="bash">
      cat GNOME.log | grep "sq.po" > GNOME_sq.log
    </pre>
  </li><li>Remove the directory <i>/po/</i> from the names of the files inside the logs:
    <pre language="bash">
      sed -e 's,/po/.*,,' -i GNOME_sq.log
    </pre>
  </li><li>Order them according to the time of the file modification:
    <pre language="bash">
      sort -t'|' -k 1,1n -o GNOME.sq.log GNOME_sq.log
      rm GNOME_sq.log
    </pre>
  </li><li>Create the visualization movie with gource and transform it in a suitable format for uploading to YouTube:
    <pre language="bash">
      gource GNOME.sq.log -s 0.1 -i 0 --max-files 0 --date-format "%B %Y" -640x360 -o - \
      | ffmpeg -y -r 25 -f image2pipe -vcodec ppm -i - -vcodec libvpx -b 10000K GNOME.sq.webm
    </pre>
</li></ol>
